/*
Media-API Client (0.4.4)
*/
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.MediaApiClient=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c,d=function(a,b){return function(){return a.apply(b,arguments)}},e=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f={}.hasOwnProperty;c=function(a){function b(){return this._error=d(this._error,this),b.__super__.constructor.apply(this,arguments)}return e(b,a),b.prototype._error=function(a,b){var c;if(b instanceof Error)c=b;else{c=new Error(b),c.name=b;try{c.message=this.ERRORS[b]||" - "}catch(d){}}if(null==a)throw c;a(c)},b}(a("events")),b.exports=c},{events:7}],2:[function(a,b){var c,d,e,f,g,h,i,j,k,l=function(a,b){return function(){return a.apply(b,arguments)}},m=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},n={}.hasOwnProperty,o=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};k=a("./utils"),c=a("./base"),e=a("./file"),f=a("./fileview"),h={host:null,domain:null,accesskey:null,keyprefix:"clientupload",autostart:!0,requestSignFn:null,resultTemplateFn:null,maxsize:0,maxcount:0,width:null,height:null,accept:null,ttl:0,acl:"public-read",properties:null,tags:null,"content-disposition":null,cssdroppable:"dropable",csshover:"hover",cssprocess:"process",cssdisabled:"disabled"},g=function(){var a;a=[];for(i in h)j=h[i],a.push(i);return a}(),d=function(a){function b(a,c,d){var e,f,g,i,j,m,n,o,p,q,r,s,t,u,v;if(null==d&&(d={}),this._validateEl=l(this._validateEl,this),this._checkFinish=l(this._checkFinish,this),this.onFinish=l(this.onFinish,this),this.fileNew=l(this.fileNew,this),this.fileError=l(this.fileError,this),this.fileDone=l(this.fileDone,this),this.enable=l(this.enable,this),this.disable=l(this.disable,this),this.abortAll=l(this.abortAll,this),this.upload=l(this.upload,this),this.onLeave=l(this.onLeave,this),this.onOver=l(this.onOver,this),this.onHover=l(this.onHover,this),this.onSelect=l(this.onSelect,this),this.initFileAPI=l(this.initFileAPI,this),this.initialize=l(this.initialize,this),b.__super__.constructor.apply(this,arguments),this.enabled=!0,this.useFileAPI=!1,this.on("file.new",this.fileNew),this.on("file.done",this.fileDone),this.on("file.error",this.fileError),this.on("file.invalid",this.fileError),this.on("file.aborted",this.fileError),this.on("finish",this.onFinish),this.within_enter=!1,this.$el=this._validateEl(a,"drag"),this.el=this.$el.get(0),this.$sel=this.$el.find("input"+(d.inputclass||"")+"[type='file']"),!this.$sel.length)return void this._error(null,"missing-select-el");if(this.formname=this.$sel.attr("name"),null!=c&&(this.$res=this._validateEl(c,"result")),f=this.$el.data(),this.options=jQuery.extend({},h,f,d||{}),!(null!=(q=this.options.host)?q.length:void 0))return void this._error(null,"missing-host");if(!this._rgxHost.test(this.options.host))return void this._error(null,"invalid-host");if(!(null!=(r=this.options.domain)?r.length:void 0))return void this._error(null,"missing-domain");if(!(null!=(s=this.options.accesskey)?s.length:void 0))return void this._error(null,"missing-accesskey");if(null!=this.options.maxcount&&(i=parseInt(this.options.maxcount,10),this.options.maxcount=isNaN(i)?h.maxcount:i),1!==this.options.maxcount&&this.$sel.attr("multiple","multiple"),null!=this.options.maxsize&&(j=parseInt(this.options.maxsize,10),this.options.maxsize=isNaN(j)?h.maxsize:j),null!=this.options.requestSignFn&&"function"!=typeof this.options.requestSignFn)return void this._error(null,"invalid-requestSignfn");if(null!=this.options.ttl&&!k.isInt(this.options.ttl))return void this._error(null,"invalid-ttl");if(null!=this.options.ttl&&(this.options.ttl=parseInt(this.options.ttl,10),isNaN(this.options.ttl)))return void this._error(null,"invalid-ttl");if(null!=this.options.tags&&k.isArray(this.options.tags)){for(t=this.options.tags,o=0,p=t.length;p>o;o++)if(n=t[o],!k.isString(n))return void this._error(null,"invalid-tags")}else if(null!=this.options.tags)return void this._error(null,"invalid-tags");return null==this.options.properties||k.isObject(this.options.properties)?null==this.options["content-disposition"]||k.isString(this.options["content-disposition"])?null==this.options.acl||k.isString(this.options.acl)||"public-read"===(u=this.options.acl)||"authenticated-read"===u?(g=this.$sel.attr("accept"),(null!=this.options.accept||null!=g)&&(e=(null!=g?g.split(","):void 0)||[],m=(null!=(v=this.options.accept)?v.split(","):void 0)||[],(null!=e?e.length:void 0)?this.options.accept=e:(null!=m?m.length:void 0)&&this.$sel.attr("accept",this.options.accept),this.options.acceptRules=this.generateAcceptRules(this.options.accept)),this.initialize(),this.idx_started=0,this.idx_finished=0,void this.$el.data("mediaapiclient",this)):void this._error(null,"invalid-acl"):void this._error(null,"invalid-content-disposition"):void this._error(null,"invalid-properties")}return m(b,a),b.prototype.version="0.4.4",b.prototype._rgxHost=/https?:\/\/[^\/$\s]+/i,b.prototype.generateAcceptRules=function(a){var b,c,d,e;for(c=[],d=0,e=a.length;e>d;d++)b=a[d],b.indexOf("/")>=0?c.push(function(){var a;return a=new RegExp(b.replace("*","\\w+")+"$","i"),function(b){return a.test(b.type)}}()):b.indexOf(".")>=0?c.push(function(){var a;return a=new RegExp(b.replace(".","\\.")+"$","i"),function(b){return a.test(b.name)}}()):"*"===b&&c.push(function(){return!0});return c},b.prototype.initialize=function(){window.File&&window.FileList&&window.FileReader&&(this.$sel.on("change",this.onSelect),this.useFileAPI=!0,this.initFileAPI())},b.prototype.initFileAPI=function(){var a;a=new XMLHttpRequest,(null!=a?a.upload:void 0)&&(this.el.ondragover=this.onHover,this.el.ondragleave=this.onLeave,this.el.ondrop=this.onSelect,this.$el.addClass(this.options.cssdroppable))},b.prototype.onSelect=function(a){var b,c,d,e,f,g,h;a.preventDefault(),this.$sel.replaceWith(this.$sel=this.$sel.clone(!0)),this.enabled&&(this.options.maxcount<=0||this.idx_started<this.options.maxcount?(this.$el.removeClass(this.options.csshover).addClass(this.options.cssprocess),b=(null!=(c=a.target)?c.files:void 0)||(null!=(d=a.originalEvent)&&null!=(e=d.target)?e.files:void 0)||(null!=(f=a.dataTransfer)?f.files:void 0)||(null!=(g=a.originalEvent)&&null!=(h=g.dataTransfer)?h.files:void 0),this.upload(b)):(this.$el.removeClass(this.options.csshover),this.disable()))},b.prototype.onHover=function(a){a.preventDefault(),this.enabled&&(this.within_enter=!0,setTimeout(function(a){return function(){return a.within_enter=!1}}(this),0),this.$el.addClass(this.options.csshover))},b.prototype.onOver=function(a){a.preventDefault(),!this.enabled},b.prototype.onLeave=function(){this.enabled&&(this.within_enter||this.$el.removeClass(this.options.csshover))},b.prototype.upload=function(a){var b,c,d,f;if(this.useFileAPI)for(d=c=0,f=a.length;f>c;d=++c)b=a[d],this.enabled&&(this.options.maxcount<=0||this.idx_started<this.options.maxcount?(this.idx_started++,new e(b,this.idx_started,this,this.options)):this.disable())},b.prototype.abortAll=function(){this.emit("abortAll")},b.prototype.disable=function(){this.$sel.attr("disabled","disabled"),this.$el.addClass(this.options.cssdisabled),this.enabled=!1},b.prototype.enable=function(){this.$sel.removeAttr("disabled"),this.$el.removeClass(this.options.cssdisabled),this.enabled=!0},b.prototype.fileDone=function(){this.idx_finished++,this._checkFinish()},b.prototype.fileError=function(a,b){console.error("FILE-ERROR",a,b),this.idx_finished++,this._checkFinish()},b.prototype.fileNew=function(a){var b;null!=this.$res&&(b=new f(a,this,this.options),this.$res.append(b.render()))},b.prototype.onFinish=function(){this.$el.removeClass(this.options.cssprocess)},b.prototype._checkFinish=function(){this.idx_finished>=this.idx_started&&(this.emit("finish"),this.options.maxcount>0&&this.idx_started>=this.options.maxcount&&this.disable())},b.prototype._validateEl=function(a,b){var c;if(null==a)return void this._error(null,"missing-"+b+"-el");switch(typeof a){case"string":c=jQuery(a);break;case"object":a instanceof jQuery&&(c=jQuery(a)),a instanceof HTMLElement&&(c=jQuery(a))}return(null!=c?c.length:void 0)?c:void this._error(null,"invalid-"+b+"-el")},b.prototype.ERRORS={"missing-select-el":"Missing select element. Please define a valid element as a jQuery Selector, DOM-node oder jQuery object","invalid-select-el":"Invalid select element. Please define a valid element as a jQuery Selector, DOM-node oder jQuery object","missing-drag-el":"Missing drag element. Please define a valid element as a jQuery Selector, DOM-node oder jQuery object","invalid-drag-el":"Invalid drag element. Please define a valid element as a jQuery Selector, DOM-node oder jQuery object","missing-host":"Missing host. You have to defien a host as url starting with `http://` or `https://`.","invalid-host":"Invalid host. You have to defien a host as url starting with `http://` or `https://`.","missing-domain":"Missing domain. You have to define a domain.","missing-accesskey":"Missing accesskey. You have to define a accesskey.","missing-keyprefix":"Missing keyprefix. You have to define a keyprefix.","invalid-ttl":"for the option `ttl` only a positiv number is allowed","invalid-tags":"for the option `tags` only an array of strings is allowed","invalid-properties":"for the option `properties` only an object is allowed","invalid-content-disposition":"for the option `content-disposition` only an string like: `attachment; filename=friendly_filename.pdf` is allowed","invalid-acl":"the option acl only accepts the string `public-read` or `authenticated-read`"},b}(c),d.defaults=function(a){for(i in a)j=a[i],o.call(g,i)>=0&&(h[i]=j);return h},b.exports=d},{"./base":1,"./file":3,"./fileview":4,"./utils":5}],3:[function(a,b){var c,d=function(a,b){return function(){return a.apply(b,arguments)}},e=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f={}.hasOwnProperty;c=function(a){function b(a,c,e,f){var g;this.file=a,this.idx=c,this.client=e,this.options=f,this._defaultRequestSignature=d(this._defaultRequestSignature,this),this._handleProgress=d(this._handleProgress,this),this._upload=d(this._upload,this),this._sign=d(this._sign,this),this._testMime=d(this._testMime,this),this._validate=d(this._validate,this),this._setState=d(this._setState,this),this.getData=d(this.getData,this),this.getType=d(this.getType,this),this.getName=d(this.getName,this),this.getProgress=d(this.getProgress,this),this.getResult=d(this.getResult,this),this.getState=d(this.getState,this),this.abort=d(this.abort,this),this.start=d(this.start,this),b.__super__.constructor.apply(this,arguments),this.state=0,this.validation=[],this.key=this.options.keyprefix+"_"+this.getName().replace(this._rgxFile2Key,"")+"_"+this._now()+"_"+this.idx,this.client.emit("file.new",this),this.client.on("abortAll",this.abort),this.on("start",this.start),this.on("signed",this._upload),null==this.options.requestSignFn&&(this.options.requestSignFn=this._defaultRequestSignature),(null!=(g=this.options.keyprefix)?g.length:void 0)||(this.options.keyprefix="clientupload"),null==this.options.autostart&&(this.options.autostart=!0),this._validate(),this.options.autostart&&this.emit("start")}return e(b,a),b.prototype.states=["new","start","signed","upload","progress","done","invalid","error","aborted"],b.prototype.start=function(){return this.state<=0&&(this._setState(1),this.client.emit("file.upload",this),this._sign()),this},b.prototype.abort=function(){var a;return this.state<=4&&(this._setState(8),null!=(a=this.requestUpload)&&a.abort(),this.emit("aborted"),this.client.emit("file.aborted",this)),this},b.prototype.getState=function(){return this.states[this.state]},b.prototype.getResult=function(){return 5===this.state&&null!=this.data?{url:this.data.url,hash:this.data.filehash,key:this.data.key,type:this.data.content_type}:null},b.prototype.getProgress=function(a){var b;return null==a&&(a=!1),b=this.state<4?0:this.state>4?1:this.progressState,a?b:Math.round(100*b)},b.prototype.getName=function(){return this.file.name},b.prototype.getType=function(){return this.file.type},b.prototype.getData=function(){var a;return a={name:this.client.formname,filename:this.getName(),idx:this.idx,state:this.getState(),progress:this.getProgress(),result:this.getResult(),options:this.options,invalid_reason:this.validation,error:this.error}},b.prototype._setState=function(a){return a>this.state&&(this.state=a,this.emit("state",this.getState())),a},b.prototype._validate=function(){var a,b;return a=this.file.size/1024,this.options.maxsize>0&&this.options.maxsize<a&&this.validation.push("maxsize"),(null!=(b=this.options.acceptRules)?b.length:void 0)&&!this._testMime(this.options.acceptRules)&&this.validation.push("accept"),this.validation.length?(this._setState(6),this.emit("invalid",this.validation),this.client.emit("file.invalid",this,this.validation),!1):!0},b.prototype._testMime=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if((b=a[c])(this.file))return!0;return!1},b.prototype._now=function(){return Math.round(Date.now()/1e3)},b.prototype._rgxFile2Key=/([^A-Za-z0-9])/gi,b.prototype._sign=function(){var a,b;b=this.getName(),a=this.getType(),this.state>1||(this.url=this.options.host+this.options.domain+"/"+this.key,this.json={blob:!0,acl:this.options.acl,ttl:this.options.ttl,properties:{filename:b}},null!=this.options.width&&(this.json.width=this.options.width),null!=this.options.height&&(this.json.height=this.options.height),null!=this.options.tags&&(this.json.tags=this.options.tags),null!=this.options.properties&&(this.json.properties=this.options.properties),null!=this.options["content-disposition"]&&(this.json["content-disposition"]=this.options["content-disposition"]),(null!=a?a.length:void 0)&&(this.json.content_type=a),this.emit("content",this.key,this.json),this.client.emit("file.content",this,this.key,this.json),this.options.requestSignFn.call(this,this.options.domain,this.options.accesskey,this.url,this.key,this.json,function(a){return function(b,c){return b?(a.error=b,a._setState(7),a.emit("error",b),void a.client.emit("file.error",a,b)):(a.url+=a.url.indexOf("?")>=0?"&":"?",a.url+="signature="+encodeURIComponent(c),a._setState(2),void a.emit("signed"))}}(this)))},b.prototype._upload=function(){var a;this.state>2||(this._setState(3),a=new FormData,a.append("JSON",JSON.stringify(this.json)),a.append("blob",this.file),this.requestUpload=jQuery.ajax({url:this.url,type:"POST",cache:!1,data:a,processData:!1,contentType:!1,success:function(a){return function(b){a.data=null!=b?b.rows[0]:void 0,a.progressState=1,a._setState(5),a.emit("done",a.data),a.client.emit("file.done",a)}}(this),error:function(a){return function(b){a._setState(7),a.progressState=0,a.error=b,a.emit("error",b),a.client.emit("file.error",a,b)}}(this),xhr:function(a){return function(){var b,c;return c=new window.XMLHttpRequest,null!=(b=c.upload)&&b.addEventListener("progress",a._handleProgress(),!1),c.addEventListener("progress",a._handleProgress(),!1),c}}(this)}))},b.prototype._handleProgress=function(){return function(a){return function(b){a.progressState=b.loaded/b.total,a._setState(4),a.emit("progress",a.getProgress(),b)}}(this)},b.prototype._defaultRequestSignature=function(a,b,c,d,e,f){var g,h,i;i=this.options.host+a+"/sign/"+b,g={url:c,key:d,json:JSON.stringify(e)},h=jQuery.post(i,g,null,"text"),h.done(function(a){f(null,a)}),h.error(function(a){console.error("get sign error",a),f(a)})},b}(a("./base")),b.exports=c},{"./base":1}],4:[function(a,b){var c,d=function(a,b){return function(){return a.apply(b,arguments)}},e=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f={}.hasOwnProperty;c=function(a){function b(a,c,e){this.fileObj=a,this.client=c,this.options=e,this.update=d(this.update,this),this.render=d(this.render,this),b.__super__.constructor.apply(this,arguments),this.template=null!=this.client.resultTemplateFn&&"function"!=typeof this.options.resultTemplateFn?this.client.resultTemplateFn:this._defaultTemplate,this.fileObj.on("progress",this.update()),this.fileObj.on("done",this.update()),this.fileObj.on("error",this.update()),this.fileObj.on("invalid",this.update())}return e(b,a),b.prototype.render=function(){return this.$el=jQuery('<div class="col-sm-6 col-md-4 file"></div>').html(this.template(this.fileObj.getData())),this.$el},b.prototype.update=function(){return function(a){return function(){a.$el.html(a.template(a.fileObj.getData()))}}(this)},b.prototype._defaultTemplate=function(a){var b,c,d,e,f,g,h,i;switch(b='<div class="thumbnail state-'+a.state+'">\n	<b>'+a.filename+"</b>",a.state){case"progress":b+='<div class="progress">\n	<div class="progress-bar" role="progressbar" aria-valuenow="'+a.progress+'" aria-valuemin="0" aria-valuemax="100" style="width: '+a.progress+'%;">\n		<span>'+a.progress+"%</span>\n	</div>\n</div>";break;case"done":b+='<div class="result">\n	<a href="'+a.result.url+'" target="_new">Fertig! ( '+a.result.key+" )</a>",h=a.result;for(c in h)e=h[c],b+='<input type="hidden" name="'+a.name+"_"+a.idx+"_"+c+'" value="'+e+'">';b+="</div>";break;case"invalid":for(b+='<div class="result">\n	<b>Invalid</b>',i=a.invalid_reason,f=0,g=i.length;g>f;f++){switch(d=i[f]){case"maxsize":b+='<div class="alert alert-error">File too big. Only files until '+a.options.maxsize+"kb are allowed.</div>";break;case"accept":b+='<div class="alert alert-error">Wrong type. Only files of type '+a.options.accept.join(", ")+" are allowed.</div>"}b+="</div>"}break;case"error":b+='<div class="alert alert-error">An Error occured.</div>';break;case"aborted":b+='<div class="alert alert-error">Upload aborted.</div>'}return b+="</div>"},b}(a("./base")),b.exports=c},{"./base":1}],5:[function(a,b){var c;c=/^\d+$/,b.exports={isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return null!==a&&"object"==typeof a},isString:function(a){return"string"==typeof a||a instanceof String},isInt:function(a){return c.test(a)}}},{}],6:[function(a,b){var c,d,e,f;c=a("./lib/base"),e=a("./lib/file"),f=a("./lib/fileview"),d=a("./lib/client"),d.Base=c,d.File=e,d.FileView=f,b.exports=d},{"./lib/base":1,"./lib/client":2,"./lib/file":3,"./lib/fileview":4}],7:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}]},{},[6])(6)});